{% extends "template.html" %}
{% block content %}
<div class="card">
    <div class="card-header">
        <h5>Crear ingreso</h5>
    </div>
    <div class="card-body">
        <div class="container-fluid">
            <form class="row" method="POST" action="/incomes/add">
                <div class="col-md-4 form-group mt-2">
                    <label for="identifier" class="form-label">Identificador</label>
                    <input type="text" class="form-control" id="identifier" name="identifier" value="{{income.identifier}}" readonly>
                </div>
                <div class="col-md-4 form-group mt-2">
                    <label for="company" class="form-label">Empresa</label>
                    <input type="text" class="form-control" id="company" name="company" value="{{income.company.name}}" readonly>
                </div>
                <div class="col-md-4 form-group mt-2">
                    <label for="status" class="form-label">Estado</label>
                    <input type="text" class="form-control" id="status" name="status" value="{{income.status}}" readonly>
                </div>

                <div class="col-md-4 form-group mt-2">
                    <label for="expiration_date" class="form-label">Fecha de expiración</label>
                    <input type="text" class="form-control datepicker" id="expiration_date" name="expiration_date" value="{{income.expiration_date.strftime('%d/%m/%Y')}}" readonly>
                </div>
                <div class="col-md-4 form-group mt-2">
                    <label for="irpf" class="form-label">IRPF</label>
                    <input type="text" class="form-control" id="irpf" name="irpf" value="{{income.irpf}}" readonly>
                </div>
                <div class="col-md-4 form-group mt-2">
                    <label for="iva" class="form-label">IVA</label>
                    <input type="text" class="form-control" id="iva" name="iva" value="{{income.iva}}" readonly>
                </div>

                <div class="col-md-4 form-group mt-2">
                    <label for="irpf_money" class="form-label">IRPF (€)</label>
                    <input type="text" class="form-control" id="irpf_money" name="irpf_money" value="{{income.irpf_money}}" readonly>
                </div>
                <div class="col-md-4 form-group mt-2">
                    <label for="iva_money" class="form-label">IVA (€)</label>
                    <input type="text" class="form-control" id="iva_money" name="iva_money" value="{{income.iva_money}}" readonly>
                </div>
                <div class="col-md-4 form-group mt-2">
                    <label for="total" class="form-label">Total (€)</label>
                    <input type="text" class="form-control" id="total" name="total" value="{{income.total}}" readonly>
                </div>

                <div class="col-12 form-group mt-2">
                    <label for="notes" class="form-label">Notas</label>
                    <textarea rows="2" class="form-control" id="notes" name="notes" readonly>{{income.notes}}</textarea>
                </div>

                <h5 class="mt-4">Productos:</h5>

                <div id="products">
                    {% set ns = namespace(position=1) %}
                    {% for product in income.products %}
                        <div class="row" id="product">
                            <div class="col-md-8 form-group mt-2">
                                <label for="description[{{ns.position}}]" class="form-label">Descripción</label>
                                <input type="text" class="form-control" id="description[{{ns.position}}]" name="description[{{ns.position}}]" value="{{product.description}}" readonly>
                            </div>
                            <div class="col-sm-5 col-md-2 form-group mt-2">
                                <label for="amount[{{ns.position}}]" class="form-label">Cantidad</label>
                                <input type="text" class="form-control amount" id="amount[{{ns.position}}]" name="amount[{{ns.position}}]" value="{{product.amount}}" readonly>
                            </div>
                            <div class="col-sm-5 col-md-2 form-group mt-2">
                                <label for="price[{{ns.position}}]" class="form-label">Precio (€)</label>
                                <input type="text" class="form-control price" id="price[{{ns.position}}]" name="price[{{ns.position}}]" value="{{product.price}}" readonly>
                            </div>
                        </div>
                        {% set ns.position = ns.position + 1 %}
                    {% endfor %}
                </div>
            </form>
        </div>
    </div>
</div>
{% endblock %}